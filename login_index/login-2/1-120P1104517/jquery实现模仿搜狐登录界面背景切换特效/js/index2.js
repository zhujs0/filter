(function(c){var a={};var b=c.browser.msie&&parseFloat(c.browser.version)<7;if(b){try{document.execCommand("BackgroundImageCache",false,true)}catch(d){}}var f={nobody:"http://r1.suc.itc.cn/itoolbar/default/nobody.v.110708.gif",lastPP:"",init:function(){var e=this;var g=PassportSC.fillEmailSelect;PassportSC.fillEmailSelect=function(){g.call(this);this.dsElement.style.backgroundColor="#000"};PassportSC.showMsg=function(j){if(!this.loginMsg){return}var i=c(this.loginMsg);if(j){i.show().html(j)}else{i.hide()}};PassportSC._drawLoginForm=function(){var i="通行证帐号/手机号";if(PassportSC.emailPostfix!=null&&PassportSC.emailPostfix.length>0){var j=PassportSC.emailPostfix[0];if(typeof(j)=="string"&&j.indexOf("@")>-1){i=j;e.lastPP=j}}this.cElement.innerHTML='<fieldset><legend class="login-form-title" >我的搜狐登录</legend><div class="login-form-itemwrapper"><form method="post" onsubmit="return PassportSC.doLogin();" name="loginform"><div id="ppcontid"><p class="login-form-item"><span class="login-form-input-before"><input type="text" name="email" id="email" value="'+i+'" autocomplete="off" disableautocomplete /></span></p><p class="login-form-item"><span class="login-form-inpu"><input type="password" name="password" id="password" autocomplete="off" disableautocomplete /></span></p><div class="error" style="display:none"></div><div class="login-form-submit"><label class="login-form-remember"><input id="rem" name="persistentcookie" checked="checked" type="checkbox" value="1" /><span>记住懒人之家</span></label><span class="login-form-forget"></span><input name="" type="submit" value="登录" class="login-submit-btn" /></div></div></form></div></fieldset >';c(".login-reg-btn").attr("href",this.registerUrl)};PassportSC.drawPassportWait=function(i){this.cElement.innerHTML='<div class="login-loading">正在登录，请稍候...</div>'};PassportSC._drawPassportCard=function(){};if(nojump){c.cookie("ppinf",null,{path:"/",domain:"sohu.com"});c.cookie("ppinfo",null,{path:"/",domain:"sohu.com"});c.cookie("passport",null,{path:"/",domain:"sohu.com"})}var h=location.search.match(/bru=([^&]+)/i);h=h?decodeURIComponent(c.trim(h[1])):"";h=/^https*:\/\/([a-z0-9]([a-z0-9\-]{0,61}[a-z0-9])?\.)+sohu\.com/ig.test(h)?h:"http://i.sohu.com";PassportSC.appid=1019;PassportSC.registerUrl="http://i.sohu.com/login/reg.do?bru="+encodeURIComponent(h);PassportSC.autoRedirectUrl=h;PassportSC.loginRedirectUrl=h;PassportSC.drawPassport(c("#passportcard")[0]);c("#email").focus(function(){c(this).parent().attr("class","login-form-input-onfocus");e.setUserInfo(this.value)}).blur(function(){c(this).parent().attr("class","login-form-input");e.setUserInfo(this.value)});c("#password").focus(function(){c(this).parent().attr("class","login-form-input-onfocus")}).blur(function(){c(this).parent().attr("class","login-form-input")});this.initUserInfo();this.initBg()},initUserInfo:function(){var e=this,h="accountinfo.do?_input_encode=UTF-8",g=c(".login-face-img > img"),i=c(".login-face-user");if(!this.lastPP){g.attr("src",this.nobody);i.html("");return}c.getJSON(h,{passport:this.lastPP},function(j){if(j.code==0){a[e.lastPP]={icon:j.data.icon,nick:j.data.nick};e.setUserInfo(e.lastPP)}})},setUserInfo:function(e){var g=this,h=c(".login-face-img > img"),i=c(".login-face-user");h.unbind("click");e=c.trim(e)==""?this.lastPP:e;if(a[e]){h.attr("src",a[e].icon).click(function(){if(g.lastPP){c("#email").val(g.lastPP)}});i.html(a[e].nick)}else{h.attr("src",this.nobody);i.html("")}},initBg:function(){var e=this;this.data=subjects;if(!this.data){return}this.len=this.data.length;this.cIndex=this.len-1;this.$bg=c(".login-background-wrapper");this.$prev=c(".login-bg-select a.prev");this.$next=c(".login-bg-select a.next");this.setBtnStatus();this.$prev.click(function(){var g=c(this);if(g.hasClass("prev-last")){return}e.cIndex=e.cIndex-1>=0?e.cIndex-1:0;e.setBg()});this.$next.click(function(){var g=c(this);if(g.hasClass("next-last")){return}e.cIndex=e.cIndex+1<=e.len-1?e.cIndex+1:e.len-1;e.setBg()})},setBtnStatus:function(){if(this.cIndex==this.len-1){this.$next.removeClass().addClass("next-last")}else{this.$next.removeClass().addClass("next")}if(this.cIndex==0){this.$prev.removeClass().addClass("prev-last")}else{this.$prev.removeClass().addClass("prev")}},setBg:function(){var e=this,g=this.data[this.cIndex];this.loadImage(g,function(h){e.$bg.animate({opacity:0.5},"normal",function(){e.$bg.css("background-image","url("+h+")").animate({opacity:1},"normal")});e.setBtnStatus()})},loadImage:function(g,h){var e=new Image();c(e).load(function(){h(g)}).attr("src",g)}};c(function(){f.init()})})(jQuery);
